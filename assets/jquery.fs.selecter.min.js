!function(e,t){"use strict";function l(t){t=e.extend({},O,t||{}),null===D&&(D=e("body"));for(var l=e(this),r=0,a=l.length;a>r;r++)s(l.eq(r),t);return l}function s(t,l){if(!t.hasClass("selecter-element")){l=e.extend({},l,t.data("selecter-options")),l.multiple=t.prop("multiple"),l.disabled=t.is(":disabled"),l.external&&(l.links=!0);var s=t.find("[selected]");!l.multiple&&""!==l.label&&s.length<1?t.prepend('<option value="" class="selecter-placeholder" selected>'+l.label+"</option>"):l.label="";var i=t.find("option, optgroup"),o=i.filter("option");s=o.filter(":selected");var c=s.length>0?o.index(s):0,d=""!==l.label?l.label:s.text(),m="div";l.tabIndex=t[0].tabIndex,t[0].tabIndex=-1;var g="",b="";b+="<"+m+' class="selecter '+l.customClass,E?b+=" mobile":l.cover&&(b+=" cover"),b+=l.multiple?" multiple":" closed",l.disabled&&(b+=" disabled"),b+='" tabindex="'+l.tabIndex+'">',b+="</"+m+">",l.multiple||(g+='<span class="selecter-selected">',g+=e("<span></span>").text(C(d,l.trim)).html(),g+="</span>"),g+='<div class="selecter-options">',g+="</div>",t.addClass("selecter-element").wrap(b).after(g);var x=t.parent(".selecter"),y=e.extend({$select:t,$allOptions:i,$options:o,$selecter:x,$selected:x.find(".selecter-selected"),$itemsWrapper:x.find(".selecter-options"),index:-1,guid:q++},l);r(y),y.multiple||h(c,y),void 0!==e.fn.scroller&&y.$itemsWrapper.scroller(),y.$selecter.on("touchstart.selecter",".selecter-selected",y,a).on("click.selecter",".selecter-selected",y,n).on("click.selecter",".selecter-item",y,u).on("close.selecter",y,p).data("selecter",y),y.$select.on("change.selecter",y,f),E||(y.$selecter.on("focus.selecter",y,v).on("blur.selecter",y,$),y.$select.on("focus.selecter",y,function(e){e.data.$selecter.trigger("focus")}))}}function r(t){for(var l="",s=t.links?"a":"span",r=0,a=0,i=t.$allOptions.length;i>a;a++){var o=t.$allOptions.eq(a);if("OPTGROUP"===o[0].tagName)l+='<span class="selecter-group',o.is(":disabled")&&(l+=" disabled"),l+='">'+o.attr("label")+"</span>";else{var n=o.val();o.attr("value")||o.attr("value",n),l+="<"+s+' class="selecter-item',o.hasClass("selecter-placeholder")&&(l+=" placeholder"),o.is(":selected")&&(l+=" selected"),o.is(":disabled")&&(l+=" disabled"),l+='" ',l+=t.links?'href="'+n+'"':'data-value="'+n+'"',l+=">"+e("<span></span>").text(C(o.text(),t.trim)).html()+"</"+s+">",r++}}t.$itemsWrapper.html(l),t.$items=t.$selecter.find(".selecter-item")}function a(e){e.stopPropagation();var t=e.data,l=e.originalEvent;P(t.timer),t.touchStartX=l.touches[0].clientX,t.touchStartY=l.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,i).on("touchend.selecter",".selecter-selected",t,o)}function i(e){var t=e.data,l=e.originalEvent;(Math.abs(l.touches[0].clientX-t.touchStartX)>10||Math.abs(l.touches[0].clientY-t.touchStartY)>10)&&t.$selecter.off("touchmove.selecter touchend.selecter")}function o(e){var t=e.data;t.$selecter.off("touchmove.selecter touchend.selecter click.selecter"),t.timer=k(t.timer,1e3,function(){t.$selecter.on("click.selecter",".selecter-selected",t,n)}),n(e)}function n(l){l.preventDefault(),l.stopPropagation();var s=l.data;if(!s.$select.is(":disabled"))if(e(".selecter").not(s.$selecter).trigger("close.selecter",[s]),s.mobile||!E||I)s.$selecter.hasClass("closed")?c(l):s.$selecter.hasClass("open")&&p(l);else{var r=s.$select[0];if(t.document.createEvent){var a=t.document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!1,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}else r.fireEvent&&r.fireEvent("onmousedown")}}function c(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){t.$selecter.offset(),D.outerHeight(),t.$itemsWrapper.outerHeight(!0),t.index>=0?t.$items.eq(t.index).position():{left:0,top:0};t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),D.on("click.selecter-"+t.guid,":not(.selecter-options)",t,d),g(t)}}function d(t){t.preventDefault(),t.stopPropagation(),0===e(t.currentTarget).parents(".selecter").length&&p(t)}function p(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),D.off(".selecter-"+t.guid))}function u(t){t.preventDefault(),t.stopPropagation();var l=e(this),s=t.data;if(!s.$select.is(":disabled")){if(s.$itemsWrapper.is(":visible")){var r=s.$items.index(l);r!==s.index&&(h(r,s),b(s))}s.multiple||p(t)}}function f(t,l){var s=e(this),r=t.data;if(!l&&!r.multiple){var a=r.$options.index(r.$options.filter("[value='"+y(s.val())+"']"));h(a,r),b(r)}}function v(t){t.preventDefault(),t.stopPropagation();var l=t.data;l.$select.is(":disabled")||l.multiple||(l.$selecter.addClass("focus").on("keydown.selecter-"+l.guid,l,m),e(".selecter").not(l.$selecter).trigger("close.selecter",[l]))}function $(t,l,s){t.preventDefault(),t.stopPropagation();var r=t.data;r.$selecter.removeClass("focus").off("keydown.selecter-"+r.guid),e(".selecter").not(r.$selecter).trigger("close.selecter",[r])}function m(t){var l=t.data;if(13===t.keyCode)l.$selecter.hasClass("open")&&(p(t),h(l.index,l)),b(l);else if(!(9===t.keyCode||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){t.preventDefault(),t.stopPropagation();var s=l.$items.length-1,r=l.index<0?0:l.index;if(e.inArray(t.keyCode,w?[38,40,37,39]:[38,40])>-1)r+=38===t.keyCode||w&&37===t.keyCode?-1:1,0>r&&(r=0),r>s&&(r=s);else{var a,i,o=String.fromCharCode(t.keyCode).toUpperCase();for(i=l.index+1;s>=i;i++)if(a=l.$options.eq(i).text().charAt(0).toUpperCase(),a===o){r=i;break}if(0>r||r===l.index)for(i=0;s>=i;i++)if(a=l.$options.eq(i).text().charAt(0).toUpperCase(),a===o){r=i;break}}r>=0&&(h(r,l),g(l))}}function h(e,t){var l=t.$items.eq(e),s=l.hasClass("selected"),r=l.hasClass("disabled");if(!r){if(-1===e&&""!==t.label)t.$selected.html(t.label);else if(s)t.multiple&&(t.$options.eq(e).prop("selected",null),l.removeClass("selected"));else{var a=l.html();l.data("value");t.multiple?t.$options.eq(e).prop("selected",!0):(t.$selected.html(a).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e),l.addClass("selected")}t.multiple||(t.index=e)}}function g(t){var l=t.$items.eq(t.index),s=t.index>=0&&!l.hasClass("placeholder")?l.position():{left:0,top:0};void 0!==e.fn.scroller?t.$itemsWrapper.scroller("scroll",t.$itemsWrapper.find(".scroller-content").scrollTop()+s.top,0).scroller("reset"):t.$itemsWrapper.scrollTop(t.$itemsWrapper.scrollTop()+s.top)}function b(e){e.links?x(e):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function x(e){var l=e.$select.val();e.external?t.open(l):t.location.href=l}function C(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function y(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}function k(e,t,l,s){return P(e,s),s===!0?setInterval(l,t):setTimeout(l,t)}function P(e){null!==e&&(clearInterval(e),e=null)}var q=0,W=t.navigator.userAgent||t.navigator.vendor||t.opera,w=/Firefox/i.test(W),E=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(W),I=w&&E,D=null,O={callback:e.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},A={defaults:function(t){return O=e.extend(O,t||{}),e(this)},disable:function(t){return e(this).each(function(l,s){var r=e(s).parent(".selecter").data("selecter");if(r)if("undefined"!=typeof t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).addClass("disabled"),r.$options.eq(a).prop("disabled",!0)}else r.$selecter.hasClass("open")&&r.$selecter.find(".selecter-selected").trigger("click.selecter"),r.$selecter.addClass("disabled"),r.$select.prop("disabled",!0)})},destroy:function(){return e(this).each(function(t,l){var s=e(l).parent(".selecter").data("selecter");s&&(s.$selecter.hasClass("open")&&s.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==e.fn.scroller&&s.$selecter.find(".selecter-options").scroller("destroy"),s.$select[0].tabIndex=s.tabIndex,s.$select.find(".selecter-placeholder").remove(),s.$selected.remove(),s.$itemsWrapper.remove(),s.$selecter.off(".selecter"),s.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},enable:function(t){return e(this).each(function(l,s){var r=e(s).parent(".selecter").data("selecter");if(r)if("undefined"!=typeof t){var a=r.$items.index(r.$items.filter("[data-value="+t+"]"));r.$items.eq(a).removeClass("disabled"),r.$options.eq(a).prop("disabled",!1)}else r.$selecter.removeClass("disabled"),r.$select.prop("disabled",!1)})},refresh:function(){return e(this).each(function(t,l){var s=e(l).parent(".selecter").data("selecter");if(s){var a=s.index;s.$allOptions=s.$select.find("option, optgroup"),s.$options=s.$allOptions.filter("option"),s.index=-1,a=s.$options.index(s.$options.filter(":selected")),r(s),s.multiple||h(a,s)}})}};e.fn.selecter=function(e){return A[e]?A[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:l.apply(this,arguments)},e.selecter=function(e){"defaults"===e&&A.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);